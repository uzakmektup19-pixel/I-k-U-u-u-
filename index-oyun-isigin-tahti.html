<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>IÅŸÄ±ÄŸÄ±n TahtÄ± â€” IÅŸÄ±k UÃ§uÅŸu</title>
  <meta name="description" content="IÅŸÄ±ÄŸÄ±n TahtÄ± â€” gÃ¶ksel uÃ§uÅŸ, Ä±ÅŸÄ±k parÃ§alarÄ±nÄ± topla, gÃ¶lgelerden kaÃ§! Tek dosyalÄ±k oyun." />
  <meta name="theme-color" content="#0b1324" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="data:image/png;base64,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" />
  <style>
    :root { --bg:#06101a; --fg:#d9fff3; --emerald:#10b981; --aqua:#22d3ee; --gold:#facc15; }
    * { box-sizing:border-box }
    html,body { height:100% }
    body {
      margin:0; background: radial-gradient(1400px 900px at 70% -10%, rgba(16,185,129,.18), transparent 40%),
                radial-gradient(900px 700px at 20% 120%, rgba(34,211,238,.08), transparent 50%), var(--bg);
      color:var(--fg); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      touch-action: manipulation;
      -webkit-user-select:none; user-select:none;
    }
    header { position:fixed; inset:12px 12px auto; display:flex; gap:8px; align-items:center; z-index:10 }
    .logo { width:36px; height:36px; border-radius:10px; border:1px solid rgba(255,255,255,.1);
             background: radial-gradient(circle at 50% 40%, rgba(16,185,129,.6), transparent 60%), #0b1324; }
    .title { font-weight:800; letter-spacing:.3px }
    #ui { position:fixed; inset:auto 12px 12px 12px; display:flex; justify-content:space-between; align-items:center; z-index:10 }
    .pill { padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.1); background:rgba(255,255,255,.05); backdrop-filter:blur(6px) }
    #score, #best { font-weight:800 }
    #btns { display:flex; gap:8px }
    button { cursor:pointer; color:#eafff7; background:linear-gradient(180deg, rgba(16,185,129,.35), rgba(16,185,129,.18));
             border:1px solid rgba(255,255,255,.14); border-radius:12px; padding:8px 12px; font-weight:700; }
    #hint { position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); padding:18px 22px; border-radius:16px;
             border:1px solid rgba(255,255,255,.12); background:rgba(11,19,36,.75); backdrop-filter:blur(8px); text-align:center; width:min(90vw,520px); }
    #hint h1 { margin:0 0 8px; font-size: clamp(28px, 5.6vw, 44px); text-shadow:0 0 18px rgba(16,185,129,.25) }
    #hint p { margin:6px 0; opacity:.9 }
    #hint .keys { display:flex; gap:8px; justify-content:center; flex-wrap:wrap; opacity:.9 }
    kbd { padding:4px 8px; border-radius:8px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.06) }
    canvas { position:fixed; inset:0; width:100%; height:100%; image-rendering: crisp-edges; }
  </style>
</head>
<body>
  <header>
    <div class="logo"></div>
    <div class="title">IÅŸÄ±ÄŸÄ±n TahtÄ± â€” IÅŸÄ±k UÃ§uÅŸu</div>
  </header>

  <canvas id="game" aria-label="IÅŸÄ±ÄŸÄ±n TahtÄ± oyunu"></canvas>

  <div id="ui">
    <div class="pill">Skor: <span id="score">0</span> Â· En Ä°yi: <span id="best">0</span></div>
    <div id="btns">
      <button id="pauseBtn">Duraklat</button>
      <button id="restartBtn">Yeniden</button>
      <button id="a2hs" style="display:none">+ Ana Ekrana</button>
    </div>
  </div>

  <div id="hint">
    <h1>IÅŸÄ±ÄŸÄ±n TahtÄ±</h1>
    <p>GÃ¶ksel koridorda uÃ§, <b>Ä±ÅŸÄ±k parÃ§alarÄ±nÄ±</b> topla, <b>gÃ¶lgelerden</b> kaÃ§.</p>
    <div class="keys">
      <p>ðŸ’» <kbd>BoÅŸluk</kbd> / <kbd>W</kbd> / <kbd>YukarÄ±</kbd> = Kanat Ã§Ä±rp</p>
      <p>ðŸ“± Ekrana dokun = Kanat Ã§Ä±rp Â· <b>BasÄ±lÄ± tut</b> = SÃ¼zÃ¼l</p>
      <p>âš¡ <b>KaydÄ±r</b> (yukarÄ±/ileri) = IÅŸÄ±k SÄ±Ã§rayÄ±ÅŸÄ± (dash)</p>
    </div>
    <p style="opacity:.85">HazÄ±rsan dokun / boÅŸluk â†’ BaÅŸla</p>
  </div>

  <script>
    // ----- PWA manifest + SW (inline) -----
    const manifest = {
      name: "IÅŸÄ±ÄŸÄ±n TahtÄ± â€” IÅŸÄ±k UÃ§uÅŸu",
      short_name: "IÅŸÄ±ÄŸÄ±n TahtÄ±",
      start_url: "./",
      display: "standalone",
      background_color: "#0b1324",
      theme_color: "#0b1324",
      icons: [
        { src: "data:image/png;base64,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", sizes: "192x192", type: "image/png" },
        { src: "data:image/png;base64,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", sizes: "512x512", type: "image/png" }
      ]
    };
    const mURL = URL.createObjectURL(new Blob([JSON.stringify(manifest)], {type:'application/manifest+json'}));
    document.head.appendChild(Object.assign(document.createElement('link'), {rel:'manifest', href:mURL}));
    if ('serviceWorker' in navigator) {
      const sw = "self.addEventListener('install',e=>self.skipWaiting());self.addEventListener('activate',e=>self.clients.claim());";
      const swURL = URL.createObjectURL(new Blob([sw], {type:'text/javascript'}));
      addEventListener('load', ()=>navigator.serviceWorker.register(swURL));
    }
    // A2HS
    let deferredPrompt; addEventListener('beforeinstallprompt', e=>{e.preventDefault(); deferredPrompt=e; const b=document.getElementById('a2hs'); b.style.display='inline-flex'; b.onclick=async()=>{deferredPrompt.prompt(); await deferredPrompt.userChoice; deferredPrompt=null;}});

    // ----- Game constants -----
    const cvs = document.getElementById('game');
    const ctx = cvs.getContext('2d');
    let W=innerWidth, H=innerHeight; onresize=()=>{W=innerWidth;H=innerHeight;cvs.width=W; cvs.height=H}; onresize();
    const G = 1400;           // gravity px/s^2 (scaled)
    const FLAP = -520;        // flap impulse
    const GLIDE = -100;       // glide gentle
    const DASH_SPEED = 900;   // dash horizontal bonus
    const MAX_VY = 900;
    const SPAWN_EVERY = 0.9;  // seconds
    const SHADOW_RATE = 0.55; // probability
    const ORB_VALUE = 10;

    const state = {start:true, over:false, paused:false};
    let tPrev=0, acc=0, score=0, best=Number(localStorage.getItem('it_best')||0);
    const scoreEl=document.getElementById('score'); const bestEl=document.getElementById('best'); bestEl.textContent=best;

    // Player
    const player = {
      x: ()=>W*0.25, y: H*0.5, vx:0, vy:0, r: 22, dashT:0, wing:0
    };

    // Entities
    const orbs = [];    // light shards
    const shadows = []; // obstacles
    function spawn() {
      const y = 80 + Math.random()*(H-160);
      if (Math.random()<SHADOW_RATE) {
        const size = 24 + Math.random()*28;
        shadows.push({x:W+40, y, r:size, vx: - (260+Math.random()*120)});
      } else {
        const size = 14 + Math.random()*10;
        orbs.push({x:W+40, y, r:size, vx: - (220+Math.random()*100), glow:0});
      }
    }

    // Controls
    let holding=false, swiping=false, swipeStart=null;
    function flap(){ player.vy = FLAP; bumpSound(); }
    function glideOn(){ holding=true; }
    function glideOff(){ holding=false; }
    function dash(){ player.vx = DASH_SPEED; player.dashT=0.15; dashSound(); }

    addEventListener('keydown', e=>{
      if (state.over) return; if (e.repeat) return;
      if (state.start) hideHint();
      if ([' ','ArrowUp','KeyW'].includes(e.code)) flap();
      if (e.code==='ShiftLeft'||e.code==='ShiftRight') dash();
      if (e.code==='KeyP') togglePause();
    });
    addEventListener('keyup', e=>{});
    addEventListener('mousedown', e=>{ if(state.over) return; if(state.start) hideHint(); flap(); glideOn(); });
    addEventListener('mouseup', e=>glideOff());
    addEventListener('touchstart', e=>{ if(state.over) return; if(state.start) hideHint(); flap(); glideOn(); swipeStart = e.touches[0]; }, {passive:true});
    addEventListener('touchend', e=>{ glideOff(); if (swiping) { swiping=false; } }, {passive:true});
    addEventListener('touchmove', e=>{
      if (!swipeStart) return;
      const dy = e.touches[0].clientY - swipeStart.clientY;
      const dx = e.touches[0].clientX - swipeStart.clientX;
      if (!swiping && (dy<-40 || dx>40)) { swiping=true; dash(); swipeStart=null; }
    }, {passive:true});

    document.getElementById('pauseBtn').onclick=()=>togglePause();
    document.getElementById('restartBtn').onclick=()=>restart();

    function togglePause(){
      if (state.over||state.start) return;
      state.paused=!state.paused;
      document.getElementById('pauseBtn').textContent = state.paused?'SÃ¼rdÃ¼r':'Duraklat';
    }
    function restart(){
      orbs.length=0; shadows.length=0;
      score=0; scoreEl.textContent=0;
      player.y=H*0.5; player.vx=0; player.vy=0; player.dashT=0;
      tPrev=0; acc=0; state.over=false; state.start=true;
      showHint();
    }

    // Hint overlay
    function hideHint(){ document.getElementById('hint').style.display='none'; state.start=false; }
    function showHint(){ document.getElementById('hint').style.display='block'; }

    // Simple sfx (procedural)
    let AC, master, sGain;
    function audioInit(){ if(AC) return; const C=window.AudioContext||window.webkitAudioContext; if(!C) return; AC=new C(); master=AC.createGain(); master.gain.value=.6; master.connect(AC.destination); sGain=AC.createGain(); sGain.gain.value=.9; sGain.connect(master);}
    function bumpSound(){ try{ audioInit(); const t=AC.currentTime; const o=AC.createOscillator(); o.type='sine'; o.frequency.value=880; const g=AC.createGain(); g.gain.value=0; o.connect(g); g.connect(sGain); g.gain.setValueAtTime(0,t); g.gain.linearRampToValueAtTime(.5,t+.02); g.gain.exponentialRampToValueAtTime(.0001,t+.35); o.start(t); o.stop(t+.4); }catch(e){} }
    function dashSound(){ try{ audioInit(); const t=AC.currentTime; const o=AC.createOscillator(); o.type='triangle'; o.frequency.value=220; const g=AC.createGain(); g.gain.value=0; o.connect(g); g.connect(sGain); g.gain.setValueAtTime(0,t); g.gain.linearRampToValueAtTime(.6,t+.01); g.gain.exponentialRampToValueAtTime(.0001,t+.4); o.frequency.exponentialRampToValueAtTime(660,t+.18); o.start(t); o.stop(t+.45); }catch(e){} }
    addEventListener('touchend', ()=>{ if(AC&&AC.state==='suspended') AC.resume(); }, {passive:true});
    addEventListener('click', ()=>{ if(AC&&AC.state==='suspended') AC.resume(); });

    // ----- Game loop -----
    let spawnTimer=0;
    requestAnimationFrame(loop);
    function loop(ts){
      if (tPrev===0) tPrev=ts;
      const dt = Math.min(0.033, (ts - tPrev)/1000);
      tPrev = ts;
      if (!state.paused && !state.start && !state.over) update(dt);
      render();
      requestAnimationFrame(loop);
    }

    function update(dt){
      // Physics
      player.vy += (holding?GLIDE:G)*dt;
      if (player.vy>MAX_VY) player.vy=MAX_VY;
      if (player.dashT>0) { player.dashT-=dt; } else { player.vx = Math.max(0, player.vx - 1400*dt); }
      player.y += player.vy*dt;
      // clamp
      if (player.y<30) { player.y=30; player.vy=0; }
      if (player.y>H-30) { player.y=H-30; player.vy=0; }

      // Spawning
      spawnTimer+=dt; if (spawnTimer>SPAWN_EVERY) { spawn(); spawnTimer=0; }

      // Move entities
      for (let i=orbs.length-1;i>=0;i--) {
        const o=orbs[i]; o.x += o.vx*dt; o.glow = (o.glow+dt*3)%1;
        if (o.x<-60) orbs.splice(i,1);
        // collide
        const dx=player.x()-o.x, dy=player.y-o.y, rr=(player.r+o.r); if(dx*dx+dy*dy<rr*rr) { orbs.splice(i,1); score+=ORB_VALUE; scoreEl.textContent=score; if(score>best){best=score;bestEl.textContent=best;localStorage.setItem('it_best',best);} bumpSound(); }
      }
      for (let i=shadows.length-1;i>=0;i--) {
        const s=shadows[i]; s.x += s.vx*dt;
        if (s.x<-80) shadows.splice(i,1);
        // collide
        const dx=player.x()-s.x, dy=player.y-s.y, rr=(player.r+s.r-6); if(dx*dx+dy*dy<rr*rr) { gameOver(); return; }
      }
    }

    function gameOver(){
      state.over=true;
      showHint();
      document.getElementById('hint').querySelector('p').innerHTML = "Ã‡arpÄ±ÅŸma! <b>Skor: "+score+"</b> Â· En iyi: "+best+"<br><small>Yeniden baÅŸlamak iÃ§in dokun / boÅŸluk</small>";
      addEventListener('keydown', resetOnce, {once:true});
      addEventListener('mousedown', resetOnce, {once:true});
      addEventListener('touchend', resetOnce, {once:true, passive:true});
      function resetOnce(){ restart(); }
    }

    // ----- Render -----
    function render(){
      // bg
      ctx.clearRect(0,0,W,H);
      // nebula gradient
      const g=ctx.createLinearGradient(0,0,W,H);
      g.addColorStop(0,'rgba(16,185,129,0.10)'); g.addColorStop(1,'rgba(34,211,238,0.06)');
      ctx.fillStyle=g; ctx.fillRect(0,0,W,H);

      // stars
      ctx.save(); ctx.globalAlpha=0.35;
      for(let i=0;i<40;i++){ const x=(i*97)%W, y=((i*233)%H); ctx.fillStyle='rgba(255,255,255,'+(0.3+((i*13)%50)/150)+')'; ctx.fillRect(x,y,2,2);}
      ctx.restore();

      // orbs
      for(const o of orbs){
        const grd = ctx.createRadialGradient(o.x,o.y,1,o.x,o.y,o.r+6);
        grd.addColorStop(0,'rgba(250,255,240,0.95)');
        grd.addColorStop(0.6,'rgba(183,255,233,0.5)');
        grd.addColorStop(1,'rgba(16,185,129,0.0)');
        ctx.fillStyle=grd; ctx.beginPath(); ctx.arc(o.x,o.y,o.r,0,Math.PI*2); ctx.fill();
        // twinkle
        const tw = 1 + Math.sin(o.glow*6)*0.4;
        ctx.strokeStyle='rgba(183,255,233,0.7)'; ctx.lineWidth=1.2;
        ctx.beginPath(); ctx.moveTo(o.x-o.r*tw,o.y); ctx.lineTo(o.x+o.r*tw,o.y); ctx.moveTo(o.x,o.y-o.r*tw); ctx.lineTo(o.x,o.y+o.r*tw); ctx.stroke();
      }

      // shadows
      ctx.fillStyle='rgba(10,16,28,0.85)';
      ctx.strokeStyle='rgba(0,0,0,0.4)';
      for(const s of shadows){
        ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill(); ctx.stroke();
        // faint aura
        const grd = ctx.createRadialGradient(s.x,s.y,s.r*0.6,s.x,s.y,s.r*1.6);
        grd.addColorStop(0,'rgba(0,0,0,0.0)'); grd.addColorStop(1,'rgba(0,0,0,0.25)');
        ctx.fillStyle=grd; ctx.beginPath(); ctx.arc(s.x,s.y,s.r*1.6,0,Math.PI*2); ctx.fill();
      }

      // player (angel orb + wings)
      const px=player.x(), py=player.y;
      const core = ctx.createRadialGradient(px,py,2,px,py,player.r+10);
      core.addColorStop(0,'#fff'); core.addColorStop(0.5,'rgba(183,255,233,.7)'); core.addColorStop(1,'rgba(16,185,129,0)');
      ctx.fillStyle=core; ctx.beginPath(); ctx.arc(px,py,player.r,0,Math.PI*2); ctx.fill();
      // wings
      ctx.strokeStyle='rgba(183,255,233,.9)'; ctx.lineWidth=2;
      const fl = 18 + 6*Math.sin(performance.now()/120);
      ctx.beginPath(); ctx.ellipse(px-10, py-6, 10, fl, -0.5, 0, Math.PI*2); ctx.stroke();
      ctx.beginPath(); ctx.ellipse(px-10, py+6, 10, fl, 0.5, 0, Math.PI*2); ctx.stroke();

      // speed trail
      if (player.dashT>0){
        ctx.strokeStyle='rgba(34,211,238,.65)'; ctx.lineWidth=6;
        ctx.beginPath(); ctx.moveTo(px-80,py); ctx.lineTo(px-10,py); ctx.stroke();
      }

      // UI text subtle (score handled in DOM)
    }
  </script>
</body>
</html>
